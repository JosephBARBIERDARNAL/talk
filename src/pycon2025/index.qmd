---
title: "(presque) Tout ce dont votre package a besoin"
author: "Joseph Barbier - *PyCon2025*"
format:
  revealjs:
    theme: [default, style.scss]
    transition: slide
    background-transition: fade
    incremental: true
    auto-stretch: false
embed-resources: true
echo: true
---

## A propos

<br>

:::: {.columns}

::: {.column width="35%"}
![](joseph.png){.circle}
<div style="font-size:0.9em;">
   *Joseph*

   <br><br>

   <a href="https://barbierjoseph.com">barbierjoseph.com</a>

   <a href="https://ysunflower.com">ysunflower.com</a>

</div>
:::

::: {.column width="15%"}
:::

::: {.column width="50%"}
<div style="font-size: 1.2em;">
   Consulting

   Open source

   Data(viz)

   ![](viz.png)
</div>
:::

::::

## Questions

<br>
<br>

<div style="font-size: 1.5em; font-style: italic;">

::: {.fragment .fade-in-then-semi-out}
Qui ne sait pas du tout ce qu'est un package Python ?
:::

<br>

::: {.fragment .fade-in-then-semi-out}
Qui a d√©j√† cr√©√© un package Python ?
:::

<br>

::: {.fragment .fade-in-then-semi-out}
Qui contribue √† des packages Python open source ?
:::

<br>

::: {.fragment .fade-in-then-semi-out}
Qui a d√©j√† mis sur PyPI un package Python ?
:::

</div>

## TLDR: package Python

```python
def my_super_cool_function(arg):
    if arg == "cool":
        something = 123
    else:
        ...

    ...

    return something
```

:::: {.columns}

::: {.column width="20%"}
:::

::: {.column width="30%"}
![](./arrow.svg){width=80%}
:::

::: {.column width="50%"}
![](./pkg.jpg){width=60%}
:::

::::

Facilement **distribuable** et donc **reutilisable** !

## Le bon package et le mauvais package

![](./meme-bon-mauvais-package.png){width=40%}

Un bon package **c'est pas (uniquement) une question de code**.

- facile √† installer ?
- facile √† comprendre ?
- facile √† utiliser ?
- facile √† d√©velopper ?


## Sommaire

<br>
<br>

### Votre package a besoin de ces 3 choses, <b>la derni√®re va vous surprendre üò±</b> !

<br>

<div style="font-size: 2em">

- `pyproject.toml` et gestion des d√©pendances

- Tester dans les meilleures conditions

::: {.blur}
- Cr√©er la meilleure documentation
:::

</div>

# Gestion des d√©pendances

## *one ~~ring~~ **file** to rule them all*

<br>

<div style="font-size: 1.4em;">

Un package √ßa se d√©compose en :

- du code Python

- des m√©ta donn√©es
    - un nom, une description, des auteur.e.s
    - des d√©pendances (numpy, pandas, etc)
    - une license
    - ...

</div>

<div style="display: flex; justify-content: center; font-size: 2em;" class="fragment">
‚ú®`pyproject.toml`‚ú®
</div>


## *one ~~ring~~ **file** to rule them all*

<br>

<div style="display: flex; justify-content: center; font-size: 1.7em;">
`pyproject.toml` + [uv](https://docs.astral.sh/uv/) = <3
</div>

<br>

![](./meme-pyproject.jpg){fig-align="center" width="50%"}

## Gestion des d√©pendances

<br>

![](./dependencies-scheme-1.png){width="50%" fig-align="center" }

## Gestion des d√©pendances

<br>

![](./dependencies-scheme-2.png){width="50%" fig-align="center" }

## Gestion des d√©pendances

<br>

![](./dependencies-scheme-3.png){width="50%" fig-align="center" }

## Gestion des d√©pendances

<br>

:::: {.columns}

::: {.fragment .column width="30%"}

![](./dependencies-numpy.png)

:::

::: {.fragment .column width="30%"}

![](./dependencies-fastapi.png)

:::

::: {.fragment .column width="30%"}

![](./dependencies-morethemes.png)

:::

::::

## Gestion des d√©pendances

<br>

<div style="font-size: 1.4em;">

- open source ‚Üí √™tre convenient

:::{.fragment}
`numpy>=2.1.0`
:::

<br>
<br>

- closed source ‚Üí restreindre autant que possible

:::{.fragment}
`numpy==2.1.3`
:::

</div>

# Tester son code

## Tester son code

:::: {.columns}

::: {.column width="30%"}
![](./meme-testing.jpg)
:::

::: {.column width="70%"}
Tester son code √ßa veut dire quoi ?

- v√©rifier que le code **n'a pas d'erreur**
- v√©rifier que le code **fait ce que je pense**
- v√©rifier que le code **fonctionne dans diff√©rents sc√©narios**
- v√©rifier que le code **fonctionne dans diff√©rents environnements**

<br>

:::{.fragment .fade-in-then-semi-out}
Il suffit de le faire tourner!
:::
:::{.fragment style="color: red; font-weight: bold; font-size: 1.5em; font-style: italic;"}
Il suffit de le faire tourner?
:::
:::

::::

## Comment (et quoi) tester

:::: {.columns}

::: {.column width="60%"}
- trust yourself
    - ‚ùå pas d'erreur
    - ‚ùå fait ce que je pense
    - ‚ùå diff√©rents sc√©narios
    - ‚ùå diff√©rents environnements
- lancer un exemple d'utilisation
    - ‚úÖ pas d'erreur
    - ‚ùì fait ce que je pense
    - ‚ùå diff√©rents sc√©narios
    - ‚ùå diff√©rents environnements
- √©crire des tests unitaires
    - ‚úÖ pas d'erreur
    - ‚úÖ fait ce que je pense
    - ‚úÖ diff√©rents sc√©narios
    - ‚ùå diff√©rents environnements
- git push ‚úÖ
:::

::: {.column width="40%"}
![](./meme-test.jpg)
:::

::::

## Github actions {auto-animate=true}

Scrits (yaml) qui se d√©clenchent dans certaines conditions

- push
- pull requests
- tous les jours √† minuit
- ...

<br>

:::{.fragment .fade-in-then-semi-out}
‚Üí faire tourner les tests unitaires
:::

:::{.fragment .fade-in-then-semi-out}
‚Üí sur plusieurs versions de Python (open source ?)
:::

:::{data-id="os" .fragment .fade-in-then-semi-out}
‚Üí sur plusieurs OS
:::

:::{.fragment .fade-in-then-semi-out}
‚Üí **Et cela tout le temps!**
:::

## Github actions  {auto-animate=true}

::: {data-id="os" style="margin-top: 100px; font-size: 3em;"}
sur plusieurs OS
:::

## Github actions  {auto-animate=true}

::: {data-id="os" style="margin-top: 100px; font-size: 3.2em; color: red;"}
sur plusieurs OS ???
:::

<br>

:::{.fragment .callout-warning style="font-size: 1.4em;"}
Python est interpr√©t√©, mais peut se comporter diff√©remment en fonction de l'OS

- noms de fichiers
- chemins
- fichiers temporaires
- permissions
- modules sp√©cifiques
:::

# Documentation

## Documentation

La premi√®re (et souvent la seule) chose que les gens verronts

<br>

Objectif: r√©duire au maximum l'effort requis pour comprendre le package.

<br>

Pour √ßa on a besoin de 2 choses:

- Landing page
- Di√°taxis framework

## Landing page

<div style="font-size: 1.5em;">

- A quoi sert le package?
- Dans quel contexte il s'inscrit (e.g., package Python)
- Exemple usage minimaliste
- Donner envie!

</div>

## Landing page

![](./doc-emacs.png){width=70% fig-align="center"}

## Landing page

![](./doc-vscode.png)

## Landing page

![](./doc-zed.png)

## Landing page

![](./doc-vim.png)

## Exemple parfait: `plotnine`

<video controls width="100%" loop>
  <source src="./plotnine.mov" type="video/webm" />
</video>

## Di√°taxis framework (**diataxis.fr**)

![](./diataxis.png)

## Aller plus loin

<div style="font-size:2em;">

- [github.com/y-sunflower/python-packaging-essentials](https://y-sunflower.github.io/python-packaging-essentials/)
- [github.com/y-sunflower/python-package-template](https://github.com/y-sunflower/python-package-template)

    - des projets open source pour la communaut√©
    - vous voulez contribuer ? c'est super facile !

</div>

##

<div style="display: flex; justify-content: center; font-size: 3em;">
Merci !
</div>

J'ai dis des choses fausses ?

::: {.nonincremental}
- venez m'en parler !
:::

J'ai dis des choses pertinentes ?

::: {.nonincremental}
- venez m'en parler !
:::

<br>

Autres ?

::: {.nonincremental}
- venez me voir !
- linkedin: Joseph Barbier
- mail: `joseph.barbierdarnal@gmail.com`
- slides: [github.com/JosephBARBIERDARNAL/talk](https://github.com/JosephBARBIERDARNAL/talk/tree/main/src/pycon2025)
:::
